{"version":3,"sources":["../../src/components/InputSelect.js"],"names":["Component","createPortal","inject","assign","domify","remove","domRemove","InputSelect","props","context","value","setState","onChange","event","preventDefault","stopPropagation","setOptionsVisible","state","optionsVisible","focusInput","target","evt","checkClose","code","which","select","keycode","_portalEl","document","addEventListener","onGlobalClick","onFocusChanged","keyboard","addListener","onKeyboard","removeEventListener","removeListener","removePortalEl","nextProps","nextState","addPortalEl","inputNode","optionsBounds","getOptionsBounds","style","container","renderer","getContainer","getBoundingClientRect","containerTop","top","containerLeft","left","inputTop","inputLeft","width","height","scrollTop","scrollLeft","appendChild","node","focus","selectionStart","focusTarget","contains","parentNode","direction","options","option","filter","o","idx","indexOf","nextIdx","length","nextOption","activeOption","map","join","label","e","onOptionClick","className","noInput","title","onKeyDown","onInput","renderOptions","onInputClick","$inject"],"mappings":"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","sourcesContent":["import { Component, createPortal } from 'inferno';\r\n\r\nimport {\r\n  inject\r\n} from 'table-js/lib/components';\r\n\r\nimport { assign } from 'min-dash';\r\n\r\nimport {\r\n  domify,\r\n  remove as domRemove\r\n} from 'min-dom';\r\n\r\n\r\nexport default class InputSelect extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    inject(this);\r\n\r\n    const { value } = props;\r\n\r\n    this.state = {\r\n      value,\r\n      optionsVisible: false\r\n    };\r\n\r\n    this._portalEl = null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('mousedown', this.onGlobalClick);\r\n    document.addEventListener('focusin', this.onFocusChanged);\r\n\r\n    this.keyboard.addListener(this.onKeyboard);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('focusin', this.onFocusChanged);\r\n    document.removeEventListener('mousedown', this.onGlobalClick);\r\n\r\n    this.keyboard.removeListener(this.onKeyboard);\r\n\r\n    this.removePortalEl();\r\n  }\r\n\r\n  componentWillReceiveProps(props) {\r\n    const { value } = props;\r\n\r\n    this.setState({\r\n      value\r\n    });\r\n  }\r\n\r\n  componentWillUpdate(nextProps, nextState) {\r\n    const { optionsVisible } = nextState;\r\n\r\n    if (optionsVisible) {\r\n      if (!this._portalEl) {\r\n        this.addPortalEl();\r\n      }\r\n    } else {\r\n      if (this._portalEl) {\r\n        this.removePortalEl();\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const { optionsVisible } = this.state;\r\n\r\n    if (!optionsVisible || !this.inputNode) {\r\n      return;\r\n    }\r\n\r\n    const optionsBounds = this.getOptionsBounds();\r\n\r\n    assign(this._portalEl.style, optionsBounds);\r\n  }\r\n\r\n  getOptionsBounds() {\r\n    const container = this.renderer.getContainer();\r\n    const { top: containerTop, left: containerLeft } = container.getBoundingClientRect();\r\n\r\n    const {\r\n      top: inputTop, left: inputLeft, width, height\r\n    } = this.inputNode.getBoundingClientRect();\r\n\r\n    const top = inputTop + height - containerTop + container.scrollTop;\r\n    const left = inputLeft - containerLeft + container.scrollLeft;\r\n\r\n    return {\r\n      top: `${top}px`,\r\n      left: `${left}px`,\r\n      width: `${width}px`\r\n    };\r\n  }\r\n\r\n  addPortalEl() {\r\n    this._portalEl = domify('<div class=\"dms-select-options\"></div>');\r\n\r\n    const container = this.renderer.getContainer();\r\n\r\n    container.appendChild(this._portalEl);\r\n\r\n    // suppress mousedown event propagation to handle click events inside the component\r\n    this._portalEl.addEventListener('mousedown', stopPropagation);\r\n  }\r\n\r\n  removePortalEl() {\r\n    if (this._portalEl) {\r\n      this._portalEl.removeEventListener('mousedown', stopPropagation);\r\n\r\n      domRemove(this._portalEl);\r\n\r\n      this._portalEl = null;\r\n    }\r\n  }\r\n\r\n  onChange = (value) => {\r\n    this.setState({\r\n      value\r\n    });\r\n\r\n    const { onChange } = this.props;\r\n\r\n    if (typeof onChange !== 'function') {\r\n      return;\r\n    }\r\n\r\n    onChange(value);\r\n  }\r\n\r\n  onInputClick = (event) => {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    this.setOptionsVisible(!this.state.optionsVisible);\r\n\r\n    this.focusInput();\r\n  }\r\n\r\n  onInput = (event) => {\r\n    const { value } = event.target;\r\n\r\n    this.onChange(value);\r\n  }\r\n\r\n  onOptionClick = (value, event) => {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    this.setOptionsVisible(false);\r\n\r\n    this.onChange(value);\r\n\r\n    this.focusInput();\r\n  }\r\n\r\n  /**\r\n   * Focus input node\r\n   */\r\n  focusInput() {\r\n    const node = this.inputNode;\r\n\r\n    node.focus();\r\n\r\n    // move cursor to end of input\r\n    if ('selectionStart' in node) {\r\n      node.selectionStart = 100000;\r\n    }\r\n  }\r\n\r\n  checkClose(focusTarget) {\r\n\r\n    if (this._portalEl\r\n      && !this._portalEl.contains(focusTarget)\r\n      && !this.parentNode.contains(focusTarget)) {\r\n      this.setOptionsVisible(false);\r\n    }\r\n  }\r\n\r\n  onFocusChanged = (evt) => {\r\n    this.checkClose(evt.target);\r\n  }\r\n\r\n  onGlobalClick = (evt) => {\r\n    this.checkClose(evt.target);\r\n  }\r\n\r\n  select(direction) {\r\n\r\n    const {\r\n      options\r\n    } = this.props;\r\n\r\n    const {\r\n      value\r\n    } = this.state;\r\n\r\n    if (!options) {\r\n      return;\r\n    }\r\n\r\n    const option = options.filter(o => o.value === value)[0];\r\n\r\n    const idx = option\r\n      ? options.indexOf(option)\r\n      : -1;\r\n\r\n    const nextIdx = (\r\n      idx === -1\r\n        ? (\r\n          direction === 1\r\n            ? 0\r\n            : options.length - 1)\r\n        : ((idx + direction) % options.length)\r\n    );\r\n\r\n    const nextOption = options[nextIdx < 0 ? options.length + nextIdx : nextIdx];\r\n\r\n    this.onChange(nextOption.value);\r\n  }\r\n\r\n  setOptionsVisible(optionsVisible) {\r\n    this.setState({\r\n      optionsVisible\r\n    });\r\n  }\r\n\r\n  onKeyDown = (evt) => {\r\n\r\n    const {\r\n      optionsVisible\r\n    } = this.state;\r\n\r\n    var code = evt.which;\r\n\r\n    // DOWN or UP\r\n    if (code === 40 || code === 38) {\r\n\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n\r\n      if (!optionsVisible) {\r\n        this.setOptionsVisible(true);\r\n      } else {\r\n        this.select(code === 40 ? 1 : -1);\r\n      }\r\n    }\r\n\r\n    if (optionsVisible) {\r\n\r\n      // ENTER\r\n      // ESC\r\n      if (code === 13 || code === 27) {\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n\r\n        this.setOptionsVisible(false);\r\n      }\r\n    }\r\n  }\r\n\r\n  onKeyboard = (keycode) => {\r\n    const { optionsVisible } = this.state;\r\n\r\n    if (!optionsVisible) {\r\n      return;\r\n    }\r\n\r\n    // close on ESC\r\n    if (keycode === 27) {\r\n      this.setOptionsVisible(false);\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  renderOptions(options, activeOption) {\r\n    return (\r\n      <div className=\"options\">\r\n        {\r\n          options.map(option => {\r\n            return (\r\n              <div\r\n                className={\r\n                  [ 'option', activeOption === option ? 'active' : '' ].join(' ')\r\n                }\r\n                data-value={ option.value }\r\n                onClick={ e => this.onOptionClick(option.value, e) }>\r\n                { option.label }\r\n              </div>\r\n            );\r\n          })\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      className,\r\n      options,\r\n      noInput,\r\n      title\r\n    } = this.props;\r\n\r\n    const {\r\n      optionsVisible,\r\n      value\r\n    } = this.state;\r\n\r\n    const option = options ? options.filter(o => o.value === value)[0] : false;\r\n\r\n    const label = option ? option.label : value;\r\n\r\n    return (\r\n      <div\r\n        title={ title }\r\n        ref={ node => this.parentNode = node }\r\n        className={ [ className || '', 'dms-input-select' ].join(' ') }\r\n        onClick={ this.onInputClick }>\r\n        {\r\n          noInput\r\n            ? <div\r\n              className=\"dms-input\"\r\n              tabindex=\"0\"\r\n              onKeyDown={ this.onKeyDown }\r\n              ref={ node => this.inputNode = node }>{ label }</div>\r\n            : <input\r\n              className=\"dms-input\"\r\n              onInput={ this.onInput }\r\n              onKeyDown={ this.onKeyDown }\r\n              spellcheck=\"false\"\r\n              ref={ node => this.inputNode = node }\r\n              type=\"text\"\r\n              value={ value } />\r\n        }\r\n        <span\r\n          className={ [\r\n            'dms-input-select-icon',\r\n            optionsVisible ? 'dmn-icon-up' : 'dmn-icon-down'\r\n          ].join(' ') }>\r\n        </span>\r\n        {\r\n          optionsVisible\r\n            && createPortal(this.renderOptions(options, option), this._portalEl)\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nInputSelect.$inject = [ 'keyboard', 'renderer' ];\r\n\r\n\r\n// helper ////\r\nfunction stopPropagation(event) {\r\n  event.stopPropagation();\r\n}\r\n"],"file":"InputSelect.js"}