{"version":3,"sources":["../../../src/render/components/TableComponent.js"],"names":["Component","TableComponent","props","injector","_injector","_sheet","get","_changeSupport","_components","_eventBus","throttle","onElementsChanged","bind","onScroll","forceUpdate","fire","changeSupport","components","getRoot","id","offElementsChanged","rows","cols","beforeTableComponents","getComponents","afterTableComponents","Head","getComponent","Body","Foot","map","index"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,SAASA,SAAT,QAA0B,SAA1B;;IAGqBC,c;;;;;AAEnB,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,wFAAMA,KAAN;AAEA,QAAMC,QAAQ,GAAG,MAAKC,SAAL,GAAiBF,KAAK,CAACC,QAAxC;AAEA,UAAKE,MAAL,GAAcF,QAAQ,CAACG,GAAT,CAAa,OAAb,CAAd;AACA,UAAKC,cAAL,GAAsBJ,QAAQ,CAACG,GAAT,CAAa,eAAb,CAAtB;AACA,UAAKE,WAAL,GAAmBL,QAAQ,CAACG,GAAT,CAAa,YAAb,CAAnB;AACA,UAAKG,SAAL,GAAiBN,QAAQ,CAACG,GAAT,CAAa,UAAb,CAAjB;AAEA,QAAMI,QAAQ,GAAGP,QAAQ,CAACG,GAAT,CAAa,UAAb,CAAjB;AAEA,UAAKK,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBC,IAAvB,+BAAzB;AAEA,UAAKC,QAAL,GAAgBH,QAAQ,CAAC,MAAKG,QAAL,CAAcD,IAAd,+BAAD,CAAxB;AAdiB;AAelB;;;;wCAEmB;AAClB,WAAKE,WAAL;AACD;;;+BAEU;AACT,WAAKL,SAAL,CAAeM,IAAf,CAAoB,cAApB;AACD;;;sCAEiB;AAChB,aAAO;AACLC,QAAAA,aAAa,EAAE,KAAKT,cADf;AAELU,QAAAA,UAAU,EAAE,KAAKT,WAFZ;AAGLL,QAAAA,QAAQ,EAAE,KAAKC;AAHV,OAAP;AAKD;;;yCAEoB;AAAA,iCACJ,KAAKC,MAAL,CAAYa,OAAZ,EADI;AAAA,UACXC,EADW,wBACXA,EADW;;AAGnB,WAAKZ,cAAL,CAAoBI,iBAApB,CAAsCQ,EAAtC,EAA0C,KAAKR,iBAA/C;AACD;;;2CAEsB;AAAA,kCACN,KAAKN,MAAL,CAAYa,OAAZ,EADM;AAAA,UACbC,EADa,yBACbA,EADa;;AAGrB,WAAKZ,cAAL,CAAoBa,kBAApB,CAAuCD,EAAvC,EAA2C,KAAKR,iBAAhD;AACD;;;6BAEQ;AAAA,kCACgB,KAAKN,MAAL,CAAYa,OAAZ,EADhB;AAAA,UACCG,IADD,yBACCA,IADD;AAAA,UACOC,IADP,yBACOA,IADP;;AAGP,UAAMC,qBAAqB,GAAG,KAAKf,WAAL,CAAiBgB,aAAjB,CAA+B,cAA/B,CAA9B;;AACA,UAAMC,oBAAoB,GAAG,KAAKjB,WAAL,CAAiBgB,aAAjB,CAA+B,aAA/B,CAA7B;;AAEA,UAAME,IAAI,GAAG,KAAKlB,WAAL,CAAiBmB,YAAjB,CAA8B,YAA9B,CAAb;;AACA,UAAMC,IAAI,GAAG,KAAKpB,WAAL,CAAiBmB,YAAjB,CAA8B,YAA9B,CAAb;;AACA,UAAME,IAAI,GAAG,KAAKrB,WAAL,CAAiBmB,YAAjB,CAA8B,YAA9B,CAAb;;AAEA,mCACiB,eADjB,GAGMJ,qBAAqB,IACnBA,qBAAqB,CAACO,GAAtB,CAA0B,UAAC9B,SAAD,EAAY+B,KAAZ;AAAA,wDAAuCA,KAAvC;AAAA,OAA1B,CAJR,wBAMmB,qBANnB,0BAOuB,WAPvB,GAQUL,IAAI;AAAA,gBAAiBL,IAAjB;AAAA,gBAA+BC;AAA/B,QARd,EASUM,IAAI;AAAA,gBAAiBP,IAAjB;AAAA,gBAA+BC;AAA/B,QATd,EAUUO,IAAI;AAAA,gBAAiBR,IAAjB;AAAA,gBAA+BC;AAA/B,QAVd;AAAA,oBAMoD,KAAKT;AANzD,UAcMY,oBAAoB,IAClBA,oBAAoB,CAACK,GAArB,CAAyB,UAAC9B,SAAD,EAAY+B,KAAZ;AAAA,wDAAuCA,KAAvC;AAAA,OAAzB,CAfR;AAmBD;;;;EA5EyC/B,S;;SAAvBC,c","sourcesContent":["import { Component } from 'inferno';\n\n\nexport default class TableComponent extends Component {\n\n  constructor(props) {\n    super(props);\n\n    const injector = this._injector = props.injector;\n\n    this._sheet = injector.get('sheet');\n    this._changeSupport = injector.get('changeSupport');\n    this._components = injector.get('components');\n    this._eventBus = injector.get('eventBus');\n\n    const throttle = injector.get('throttle');\n\n    this.onElementsChanged = this.onElementsChanged.bind(this);\n\n    this.onScroll = throttle(this.onScroll.bind(this));\n  }\n\n  onElementsChanged() {\n    this.forceUpdate();\n  }\n\n  onScroll() {\n    this._eventBus.fire('sheet.scroll');\n  }\n\n  getChildContext() {\n    return {\n      changeSupport: this._changeSupport,\n      components: this._components,\n      injector: this._injector\n    };\n  }\n\n  componentWillMount() {\n    const { id } = this._sheet.getRoot();\n\n    this._changeSupport.onElementsChanged(id, this.onElementsChanged);\n  }\n\n  componentWillUnmount() {\n    const { id } = this._sheet.getRoot();\n\n    this._changeSupport.offElementsChanged(id, this.onElementsChanged);\n  }\n\n  render() {\n    const { rows, cols } = this._sheet.getRoot();\n\n    const beforeTableComponents = this._components.getComponents('table.before');\n    const afterTableComponents = this._components.getComponents('table.after');\n\n    const Head = this._components.getComponent('table.head');\n    const Body = this._components.getComponent('table.body');\n    const Foot = this._components.getComponent('table.foot');\n\n    return (\n      <div className=\"tjs-container\">\n        {\n          beforeTableComponents &&\n            beforeTableComponents.map((Component, index) => <Component key={ index } />)\n        }\n        <div className=\"tjs-table-container\" onScroll={ this.onScroll }>\n          <table className=\"tjs-table\">\n            { Head && <Head rows={ rows } cols={ cols } /> }\n            { Body && <Body rows={ rows } cols={ cols } /> }\n            { Foot && <Foot rows={ rows } cols={ cols } /> }\n          </table>\n        </div>\n        {\n          afterTableComponents &&\n            afterTableComponents.map((Component, index) => <Component key={ index } />)\n        }\n      </div>\n    );\n  }\n}"],"file":"TableComponent.js"}