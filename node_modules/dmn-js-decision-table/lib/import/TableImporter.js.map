{"version":3,"sources":["../../src/import/TableImporter.js"],"names":["assign","is","elementData","semantic","attrs","id","type","$type","businessObject","TableImporter","elementFactory","eventBus","sheet","_elementFactory","_eventBus","_sheet","element","createRoot","setRoot","createCol","addCol","inputEntry","outputEntry","cells","map","entry","createCell","createRow","addRow","fire","$inject"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,SAASA,MAAT,QAAuB,UAAvB;AAEA,SAASC,EAAT,QAAmB,kCAAnB;;AAEA,SAASC,WAAT,CAAqBC,QAArB,EAA+BC,KAA/B,EAAsC;AACpC,SAAOJ,MAAM,CAAC;AACZK,IAAAA,EAAE,EAAEF,QAAQ,CAACE,EADD;AAEZC,IAAAA,IAAI,EAAEH,QAAQ,CAACI,KAFH;AAGZC,IAAAA,cAAc,EAAEL;AAHJ,GAAD,EAIVC,KAJU,CAAb;AAKD;;IAEoBK,a;AAEnB,yBAAYC,cAAZ,EAA4BC,QAA5B,EAAsCC,KAAtC,EAA6C;AAAA;;AAC3C,SAAKC,eAAL,GAAuBH,cAAvB;AACA,SAAKI,SAAL,GAAiBH,QAAjB;AACA,SAAKI,MAAL,GAAcH,KAAd;AACD;AAED;AACF;AACA;;;;;WACE,aAAIT,QAAJ,EAAc;AAAA;;AACZ,UAAIa,OAAJ,CADY,CAGZ;;AACA,UAAIf,EAAE,CAACE,QAAD,EAAW,mBAAX,CAAN,EAAuC;AACrCa,QAAAA,OAAO,GAAG,KAAKH,eAAL,CAAqBI,UAArB,CAAgCf,WAAW,CAACC,QAAD,CAA3C,CAAV;;AAEA,aAAKY,MAAL,CAAYG,OAAZ,CAAoBF,OAApB;AACD,OAJD,CAMA;AANA,WAOK,IAAIf,EAAE,CAACE,QAAD,EAAW,iBAAX,CAAN,EAAqC;AACxCa,QAAAA,OAAO,GAAG,KAAKH,eAAL,CAAqBM,SAArB,CAA+BjB,WAAW,CAACC,QAAD,CAA1C,CAAV;;AAEA,aAAKY,MAAL,CAAYK,MAAZ,CAAmBJ,OAAnB;AACD,OAJI,CAML;AANK,WAOA,IAAIf,EAAE,CAACE,QAAD,EAAW,kBAAX,CAAN,EAAsC;AACzCa,QAAAA,OAAO,GAAG,KAAKH,eAAL,CAAqBM,SAArB,CAA+BjB,WAAW,CAACC,QAAD,CAA1C,CAAV;;AAEA,aAAKY,MAAL,CAAYK,MAAZ,CAAmBJ,OAAnB;AACD,OAJI,CAML;AANK,WAOA,IAAIf,EAAE,CAACE,QAAD,EAAW,kBAAX,CAAN,EAAsC;AACzC,YAAI,CAACA,QAAQ,CAACkB,UAAd,EAA0B;AACxBlB,UAAAA,QAAQ,CAACkB,UAAT,GAAsB,EAAtB;AACD;;AAED,YAAI,CAAClB,QAAQ,CAACmB,WAAd,EAA2B;AACzBnB,UAAAA,QAAQ,CAACmB,WAAT,GAAuB,EAAvB;AACD;;AAED,YAAMC,KAAK,GAAG,6BACTpB,QAAQ,CAACkB,UADA,sBAETlB,QAAQ,CAACmB,WAFA,GAGZE,GAHY,CAGR,UAACC,KAAD,EAAW;AACf,iBAAO,KAAI,CAACZ,eAAL,CAAqBa,UAArB,CAAgCxB,WAAW,CAACuB,KAAD,CAA3C,CAAP;AACD,SALa,CAAd;AAOAT,QAAAA,OAAO,GAAG,KAAKH,eAAL,CAAqBc,SAArB,CAA+B3B,MAAM,CAACE,WAAW,CAACC,QAAD,CAAZ,EAAwB;AACrEoB,UAAAA,KAAK,EAALA;AADqE,SAAxB,CAArC,CAAV;;AAIA,aAAKR,MAAL,CAAYa,MAAZ,CAAmBZ,OAAnB;AACD;;AAED,WAAKF,SAAL,CAAee,IAAf,CAAoB,kBAApB,EAAwC;AAAEb,QAAAA,OAAO,EAAEA;AAAX,OAAxC;;AAEA,aAAOA,OAAP;AACD;;;;;;SA9DkBP,a;AAiErBA,aAAa,CAACqB,OAAd,GAAwB,CAAE,gBAAF,EAAoB,UAApB,EAAgC,OAAhC,CAAxB","sourcesContent":["import { assign } from 'min-dash';\n\nimport { is } from 'dmn-js-shared/lib/util/ModelUtil';\n\nfunction elementData(semantic, attrs) {\n  return assign({\n    id: semantic.id,\n    type: semantic.$type,\n    businessObject: semantic\n  }, attrs);\n}\n\nexport default class TableImporter {\n\n  constructor(elementFactory, eventBus, sheet) {\n    this._elementFactory = elementFactory;\n    this._eventBus = eventBus;\n    this._sheet = sheet;\n  }\n\n  /**\n   * Add DMN element.\n   */\n  add(semantic) {\n    let element;\n\n    // decision table\n    if (is(semantic, 'dmn:DecisionTable')) {\n      element = this._elementFactory.createRoot(elementData(semantic));\n\n      this._sheet.setRoot(element);\n    }\n\n    // input clause\n    else if (is(semantic, 'dmn:InputClause')) {\n      element = this._elementFactory.createCol(elementData(semantic));\n\n      this._sheet.addCol(element);\n    }\n\n    // output clause\n    else if (is(semantic, 'dmn:OutputClause')) {\n      element = this._elementFactory.createCol(elementData(semantic));\n\n      this._sheet.addCol(element);\n    }\n\n    // rule\n    else if (is(semantic, 'dmn:DecisionRule')) {\n      if (!semantic.inputEntry) {\n        semantic.inputEntry = [];\n      }\n\n      if (!semantic.outputEntry) {\n        semantic.outputEntry = [];\n      }\n\n      const cells = [\n        ...semantic.inputEntry,\n        ...semantic.outputEntry\n      ].map((entry) => {\n        return this._elementFactory.createCell(elementData(entry));\n      });\n\n      element = this._elementFactory.createRow(assign(elementData(semantic), {\n        cells\n      }));\n\n      this._sheet.addRow(element);\n    }\n\n    this._eventBus.fire('dmnElement.added', { element: element });\n\n    return element;\n  }\n}\n\nTableImporter.$inject = [ 'elementFactory', 'eventBus', 'sheet' ];"],"file":"TableImporter.js"}