{"version":3,"sources":["../../../src/features/modeling/ElementFactory.js"],"names":["is","BaseElementFactory","ElementFactory","dmnFactory","_dmnFactory","tType","attrs","businessObject","type","additionalAttrs","col","Error","create","id","$inject"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,EAAT,QAAmB,kCAAnB;AAEA,OAAOC,kBAAP,MAA+B,kCAA/B;;IAIqBC,c;;;;;AAEnB,0BAAYC,UAAZ,EAAwB;AAAA;;AAAA;;AACtB;AAEA,UAAKC,WAAL,GAAmBD,UAAnB;AAHsB;AAIvB;;;;WAED,gBAAOE,KAAP,EAAcC,KAAd,EAAqB;AAEnB,UAAMH,UAAU,GAAG,KAAKC,WAAxB;;AAEA,UAAMG,cAAN,GAAmDD,KAAnD,CAAMC,cAAN;AAAA,UAAsBC,IAAtB,GAAmDF,KAAnD,CAAsBE,IAAtB;AAAA,UAA+BC,eAA/B,4BAAmDH,KAAnD;;AAEA,UAAI,CAACC,cAAL,EAAqB;AAEnB,YAAI,CAACC,IAAL,EAAW;AAET,cAAIH,KAAK,KAAK,MAAd,EAAsB;AACpBG,YAAAA,IAAI,GAAG,mBAAP;AACD,WAFD,MAEO,IAAIH,KAAK,KAAK,MAAd,EAAsB;AAC3B,gBACEK,GADF,GAEID,eAFJ,CACEC,GADF;;AAIA,gBAAIV,EAAE,CAACU,GAAD,EAAM,kBAAN,CAAN,EAAiC;AAC/BF,cAAAA,IAAI,GAAG,uBAAP;AACD;;AAED,gBAAIR,EAAE,CAACU,GAAD,EAAM,iBAAN,CAAN,EAAgC;AAC9BF,cAAAA,IAAI,GAAG,gBAAP;AACD;AACF;;AAED,cAAI,CAACA,IAAL,EAAW;AACT,kBAAM,IAAIG,KAAJ,CAAU,qBAAV,CAAN;AACD;AACF;;AAEDJ,QAAAA,cAAc,GAAGJ,UAAU,CAACS,MAAX,CAAkBJ,IAAlB,CAAjB;AACD;;AAED,wFAAoBH,KAApB;AACEE,QAAAA,cAAc,EAAdA,cADF;AAEEM,QAAAA,EAAE,EAAEN,cAAc,CAACM;AAFrB,SAGKJ,eAHL;AAKD;;;;EA/CyCR,kB;;SAAvBC,c;AAmDrBA,cAAc,CAACY,OAAf,GAAyB,CAAE,YAAF,CAAzB","sourcesContent":["import { is } from 'dmn-js-shared/lib/util/ModelUtil';\n\nimport BaseElementFactory from 'table-js/lib/core/ElementFactory';\n\n\n\nexport default class ElementFactory extends BaseElementFactory {\n\n  constructor(dmnFactory) {\n    super();\n\n    this._dmnFactory = dmnFactory;\n  }\n\n  create(tType, attrs) {\n\n    const dmnFactory = this._dmnFactory;\n\n    let { businessObject, type, ...additionalAttrs } = attrs;\n\n    if (!businessObject) {\n\n      if (!type) {\n\n        if (tType === 'root') {\n          type = 'dmn:DecisionTable';\n        } else if (tType === 'cell') {\n          let {\n            col\n          } = additionalAttrs;\n\n          if (is(col, 'dmn:OutputClause')) {\n            type = 'dmn:LiteralExpression';\n          }\n\n          if (is(col, 'dmn:InputClause')) {\n            type = 'dmn:UnaryTests';\n          }\n        }\n\n        if (!type) {\n          throw new Error('cannot guess <type>');\n        }\n      }\n\n      businessObject = dmnFactory.create(type);\n    }\n\n    return super.create(tType, {\n      businessObject,\n      id: businessObject.id,\n      ...additionalAttrs\n    });\n  }\n\n}\n\nElementFactory.$inject = [ 'dmnFactory' ];\n"],"file":"ElementFactory.js"}