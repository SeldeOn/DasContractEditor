{"version":3,"sources":["../../../src/features/modeling/Modeling.js"],"names":["assign","BaseModeling","UpdateAllowedValuesHandler","UpdatePropertiesHandler","IdClaimHandler","Modeling","eventBus","elementFactory","commandStack","sheet","_eventBus","_elementFactory","_commandStack","_sheet","_getHandlers","name","root","getRoot","businessObject","parentBusinessObject","$parent","context","element","properties","execute","id","hitPolicy","aggregation","el","props","inputExpression","output","typeRef","cell","text","rule","description","allowedValues","expressionLanguage","moddleElement","claiming","$inject"],"mappings":"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","sourcesContent":["import { assign } from 'min-dash';\r\n\r\nimport BaseModeling from 'table-js/lib/features/modeling/Modeling';\r\n\r\nimport UpdateAllowedValuesHandler from './cmd/UpdateAllowedValuesHandler';\r\nimport UpdatePropertiesHandler\r\n  from 'dmn-js-shared/lib/features/modeling/cmd/UpdatePropertiesHandler';\r\nimport IdClaimHandler from './cmd/IdClaimHandler';\r\n\r\n\r\nexport default class Modeling extends BaseModeling {\r\n\r\n  constructor(eventBus, elementFactory, commandStack, sheet) {\r\n    super(eventBus, elementFactory, commandStack);\r\n\r\n    this._eventBus = eventBus;\r\n    this._elementFactory = elementFactory;\r\n    this._commandStack = commandStack;\r\n    this._sheet = sheet;\r\n  }\r\n\r\n  getHandlers() {\r\n    return Modeling._getHandlers();\r\n  }\r\n\r\n  static _getHandlers() {\r\n    return assign({}, super._getHandlers(), {\r\n      'editAllowedValues': UpdateAllowedValuesHandler,\r\n      'element.updateProperties': UpdatePropertiesHandler,\r\n      'id.updateClaim': IdClaimHandler\r\n    });\r\n  }\r\n\r\n  editDecisionTableName(name) {\r\n    const root = this._sheet.getRoot(),\r\n          businessObject = root.businessObject,\r\n          parentBusinessObject = businessObject.$parent;\r\n\r\n    const context = {\r\n      element: parentBusinessObject,\r\n      properties: {\r\n        name\r\n      }\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  editDecisionTableId(id) {\r\n    const root = this._sheet.getRoot(),\r\n          businessObject = root.businessObject,\r\n          parentBusinessObject = businessObject.$parent;\r\n\r\n    const context = {\r\n      element: parentBusinessObject,\r\n      properties: {\r\n        id\r\n      }\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  editHitPolicy(hitPolicy, aggregation) {\r\n    const root = this._sheet.getRoot(),\r\n          businessObject = root.businessObject;\r\n\r\n    const context = {\r\n      element: businessObject,\r\n      properties: {\r\n        hitPolicy,\r\n        aggregation\r\n      }\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  updateProperties(el, props) {\r\n    const context = {\r\n      element: el,\r\n      properties: props\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  editInputExpression(inputExpression, props) {\r\n    const context = {\r\n      element: inputExpression,\r\n      properties: props\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  editOutputName(output, name) {\r\n    const context = {\r\n      element: output,\r\n      properties: {\r\n        name\r\n      }\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  editInputExpressionTypeRef(inputExpression, typeRef) {\r\n    const context = {\r\n      element: inputExpression,\r\n      properties: {\r\n        typeRef\r\n      }\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  editOutputTypeRef(output, typeRef) {\r\n    const context = {\r\n      element: output,\r\n      properties: {\r\n        typeRef\r\n      }\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  editCell(cell, text) {\r\n    const context = {\r\n      element: cell,\r\n      properties: {\r\n        text\r\n      }\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  editAnnotation(rule, description) {\r\n    const context = {\r\n      element: rule,\r\n      properties: {\r\n        description\r\n      }\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  editAllowedValues(element, allowedValues) {\r\n    const context = {\r\n      element,\r\n      allowedValues\r\n    };\r\n\r\n    this._commandStack.execute('editAllowedValues', context);\r\n  }\r\n\r\n  editExpressionLanguage(element, expressionLanguage) {\r\n    const context = {\r\n      element,\r\n      properties: {\r\n        expressionLanguage\r\n      }\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  claimId(id, moddleElement) {\r\n    const context = {\r\n      id: id,\r\n      element: moddleElement,\r\n      claiming: true\r\n    };\r\n\r\n    this._commandStack.execute('id.updateClaim', context);\r\n  }\r\n\r\n  unclaimId(id, moddleElement) {\r\n    const context = {\r\n      id: id,\r\n      element: moddleElement\r\n    };\r\n\r\n    this._commandStack.execute('id.updateClaim', context);\r\n  }\r\n}\r\n\r\nModeling.$inject = [ 'eventBus', 'elementFactory', 'commandStack', 'sheet' ];"],"file":"Modeling.js"}