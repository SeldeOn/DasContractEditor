{"version":3,"sources":["../../../../src/features/simple-date-edit/components/OutputDateEdit.js"],"names":["Component","ValidatedInput","getSampleDate","validateISOString","parseString","OutputDateEdit","props","context","_modeling","injector","get","element","parsedString","businessObject","text","state","date","debounceInput","debouncedEditCell","editCell","bind","onClick","onInput","cell","setState","value"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,SAAT,QAA0B,SAA1B;AAEA,OAAOC,cAAP,MAA2B,6CAA3B;AAEA,SACEC,aADF,EAEEC,iBAFF,EAGEC,WAHF,QAIO,UAJP;;IAOqBC,c;;;;;AAEnB,0BAAYC,KAAZ,EAAmBC,OAAnB,EAA4B;AAAA;;AAAA;;AAC1B,8BAAMD,KAAN,EAAaC,OAAb;AAEA,UAAKC,SAAL,GAAiBD,OAAO,CAACE,QAAR,CAAiBC,GAAjB,CAAqB,UAArB,CAAjB;AAEA,QAAQC,OAAR,GAAoB,MAAKL,KAAL,CAAWC,OAA/B,CAAQI,OAAR;AAEA,QAAMC,YAAY,GAAGR,WAAW,CAACO,OAAO,CAACE,cAAR,CAAuBC,IAAxB,CAAhC;AAEA,UAAKC,KAAL,GAAa;AACXC,MAAAA,IAAI,EAAEJ,YAAY,GAAGA,YAAY,CAACI,IAAhB,GAAuB;AAD9B,KAAb;AAIA,QAAMC,aAAa,GAAGV,OAAO,CAACE,QAAR,CAAiBC,GAAjB,CAAqB,eAArB,CAAtB;AAEA,UAAKQ,iBAAL,GAAyBD,aAAa,CAAC,MAAKE,QAAL,CAAcC,IAAd,+BAAD,CAAtC;AACA,UAAKD,QAAL,GAAgB,MAAKA,QAAL,CAAcC,IAAd,+BAAhB;AAEA,UAAKC,OAAL,GAAe,MAAKA,OAAL,CAAaD,IAAb,+BAAf;AACA,UAAKE,OAAL,GAAe,MAAKA,OAAL,CAAaF,IAAb,+BAAf;AAnB0B;AAoB3B;;;;WAED,kBAASG,IAAT,EAAeT,IAAf,EAAqB;AACnB,WAAKN,SAAL,CAAeW,QAAf,CAAwBI,IAAxB,EAA8BT,IAA9B;AACD;;;WAED,mBAAU;AACR,UAAQH,OAAR,GAAoB,KAAKL,KAAL,CAAWC,OAA/B,CAAQI,OAAR;AAEA,UAAMK,IAAI,GAAGd,aAAa,EAA1B;AAEA,WAAKsB,QAAL,CAAc;AACZR,QAAAA,IAAI,EAAJA;AADY,OAAd;AAIA,WAAKG,QAAL,CAAcR,OAAO,CAACE,cAAtB,mBAAgDG,IAAhD;AACD;;;WAED,uBAAmB;AAAA,UAATS,KAAS,QAATA,KAAS;AACjB,UAAQd,OAAR,GAAoB,KAAKL,KAAL,CAAWC,OAA/B,CAAQI,OAAR;AAEA,WAAKa,QAAL,CAAc;AACZR,QAAAA,IAAI,EAAES;AADM,OAAd;AAIA,WAAKP,iBAAL,CAAuBP,OAAO,CAACE,cAA/B,mBAAyDY,KAAzD;AACD;;;WAED,kBAAS;AACP,UAAQT,IAAR,GAAiB,KAAKD,KAAtB,CAAQC,IAAR;AAEA,mCACa,yCADb,wBAGc,aAHd,yDAKc,aALd;AAAA,mBASkB,KAAKM,OATvB;AAAA,sCAU+BpB,aAAa,EAV5C;AAAA,oBAWmBC,iBAXnB;AAAA,iBAYgBa,IAZhB;AAAA,qBAakB;AAblB,8BAgBmB,UAhBnB,0DAkBoB,WAlBpB;AAAA,gBAiB8B,QAjB9B;AAAA,mBAmBoB,KAAKK;AAnBzB;AAyBD;;;;EA9EyCrB,S;;SAAvBK,c","sourcesContent":["import { Component } from 'inferno';\r\n\r\nimport ValidatedInput from 'dmn-js-shared/lib/components/ValidatedInput';\r\n\r\nimport {\r\n  getSampleDate,\r\n  validateISOString,\r\n  parseString\r\n} from '../Utils';\r\n\r\n\r\nexport default class OutputDateEdit extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this._modeling = context.injector.get('modeling');\r\n\r\n    const { element } = this.props.context;\r\n\r\n    const parsedString = parseString(element.businessObject.text);\r\n\r\n    this.state = {\r\n      date: parsedString ? parsedString.date : ''\r\n    };\r\n\r\n    const debounceInput = context.injector.get('debounceInput');\r\n\r\n    this.debouncedEditCell = debounceInput(this.editCell.bind(this));\r\n    this.editCell = this.editCell.bind(this);\r\n\r\n    this.onClick = this.onClick.bind(this);\r\n    this.onInput = this.onInput.bind(this);\r\n  }\r\n\r\n  editCell(cell, text) {\r\n    this._modeling.editCell(cell, text);\r\n  }\r\n\r\n  onClick() {\r\n    const { element } = this.props.context;\r\n\r\n    const date = getSampleDate();\r\n\r\n    this.setState({\r\n      date\r\n    });\r\n\r\n    this.editCell(element.businessObject, `date(\"${ date }\")`);\r\n  }\r\n\r\n  onInput({ value }) {\r\n    const { element } = this.props.context;\r\n\r\n    this.setState({\r\n      date: value\r\n    });\r\n\r\n    this.debouncedEditCell(element.businessObject, `date(\"${ value }\")`);\r\n  }\r\n\r\n  render() {\r\n    const { date } = this.state;\r\n\r\n    return (\r\n      <div class=\"context-menu-container simple-date-edit\">\r\n\r\n        <h3 class=\"dms-heading\">Edit date</h3>\r\n\r\n        <h4 class=\"dms-heading\">Set date</h4>\r\n\r\n        <div>\r\n          <ValidatedInput\r\n            onInput={ this.onInput }\r\n            placeholder={ `e.g. ${ getSampleDate() }` }\r\n            validate={ validateISOString }\r\n            value={ date }\r\n            className=\"dms-block\">\r\n          </ValidatedInput>\r\n\r\n          <p className=\"dms-hint\">\r\n            Set date <button type=\"button\"\r\n              className=\"use-today\"\r\n              onClick={ this.onClick }>to today</button>.\r\n          </p>\r\n        </div>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}"],"file":"OutputDateEdit.js"}