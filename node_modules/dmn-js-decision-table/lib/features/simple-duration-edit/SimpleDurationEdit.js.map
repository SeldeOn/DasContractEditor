{"version":3,"sources":["../../../src/features/simple-duration-edit/SimpleDurationEdit.js"],"names":["InputDurationEdit","OutputDurationEdit","isInput","isOutput","SimpleDurationEdit","components","simpleMode","registerProvider","element","typeRef","getTypeRef","col","isDuration","onGetComponent","context","contextMenuType","$inject","businessObject","inputExpression","durations","includes"],"mappings":";;;;;;AAAA,OAAOA,iBAAP,MAA8B,gCAA9B;AACA,OAAOC,kBAAP,MAA+B,iCAA/B;AAEA,SAASC,OAAT,EAAkBC,QAAlB,QAAkC,kCAAlC;;IAEqBC,kB,6BACnB,4BAAYC,UAAZ,EAAwBC,UAAxB,EAAoC;AAAA;;AAClCA,EAAAA,UAAU,CAACC,gBAAX,CAA4B,UAAAC,OAAO,EAAI;AACrC,QAAMC,OAAO,GAAGC,UAAU,CAACF,OAAD,CAA1B;AAEA,WAAO,CAACN,OAAO,CAACM,OAAO,CAACG,GAAT,CAAP,IAAwBR,QAAQ,CAACK,OAAO,CAACG,GAAT,CAAjC,KACFC,UAAU,CAACH,OAAD,CADf;AAED,GALD;AAOAJ,EAAAA,UAAU,CAACQ,cAAX,CAA0B,cAA1B,EAA0C,YAAkB;AAAA,QAAjBC,OAAiB,uEAAP,EAAO;;AAC1D,QAAIA,OAAO,CAACC,eAAR,IAA2BD,OAAO,CAACC,eAAR,KAA4B,kBAA3D,EAA+E;AAE7E,UAAI,CAACD,OAAO,CAACN,OAAb,EAAsB;AACpB;AACD;;AAED,UAAMC,OAAO,GAAGC,UAAU,CAACI,OAAO,CAACN,OAAT,CAA1B;;AAEA,UAAII,UAAU,CAACH,OAAD,CAAd,EAAyB;AAEvB,YAAIP,OAAO,CAACY,OAAO,CAACN,OAAR,CAAgBG,GAAjB,CAAX,EAAkC;AAChC,iBAAOX,iBAAP;AACD,SAFD,MAEO,IAAIG,QAAQ,CAACW,OAAO,CAACN,OAAR,CAAgBG,GAAjB,CAAZ,EAAmC;AACxC,iBAAOV,kBAAP;AACD;AAEF;AAEF;AACF,GApBD;AAqBD,C;;SA9BkBG,kB;AAiCrBA,kBAAkB,CAACY,OAAnB,GAA6B,CAAE,YAAF,EAAgB,YAAhB,CAA7B,C,CAGA;;AAEA,SAASN,UAAT,CAAoBF,OAApB,EAA6B;AAC3B,MAAIN,OAAO,CAACM,OAAO,CAACG,GAAT,CAAX,EAA0B;AACxB,WAAOH,OAAO,CAACG,GAAR,IAAeH,OAAO,CAACG,GAAR,CAAYM,cAAZ,CAA2BC,eAA3B,CAA2CT,OAAjE;AACD,GAFD,MAEO;AACL,WAAOD,OAAO,CAACG,GAAR,IAAeH,OAAO,CAACG,GAAR,CAAYM,cAAZ,CAA2BR,OAAjD;AACD;AACF;;AAED,IAAMU,SAAS,GAAG,CAChB,mBADgB,EAEhB,iBAFgB,CAAlB;;AAKA,SAASP,UAAT,CAAoBH,OAApB,EAA6B;AAC3B,SAAOU,SAAS,CAACC,QAAV,CAAmBX,OAAnB,CAAP;AACD","sourcesContent":["import InputDurationEdit from './components/InputDurationEdit';\nimport OutputDurationEdit from './components/OutputDurationEdit';\n\nimport { isInput, isOutput } from 'dmn-js-shared/lib/util/ModelUtil';\n\nexport default class SimpleDurationEdit {\n  constructor(components, simpleMode) {\n    simpleMode.registerProvider(element => {\n      const typeRef = getTypeRef(element);\n\n      return (isInput(element.col) || isOutput(element.col))\n        && isDuration(typeRef);\n    });\n\n    components.onGetComponent('context-menu', (context = {}) => {\n      if (context.contextMenuType && context.contextMenuType === 'simple-mode-edit') {\n\n        if (!context.element) {\n          return;\n        }\n\n        const typeRef = getTypeRef(context.element);\n\n        if (isDuration(typeRef)) {\n\n          if (isInput(context.element.col)) {\n            return InputDurationEdit;\n          } else if (isOutput(context.element.col)) {\n            return OutputDurationEdit;\n          }\n\n        }\n\n      }\n    });\n  }\n}\n\nSimpleDurationEdit.$inject = [ 'components', 'simpleMode' ];\n\n\n// helpers //////////////////////\n\nfunction getTypeRef(element) {\n  if (isInput(element.col)) {\n    return element.col && element.col.businessObject.inputExpression.typeRef;\n  } else {\n    return element.col && element.col.businessObject.typeRef;\n  }\n}\n\nconst durations = [\n  'yearMonthDuration',\n  'dayTimeDuration'\n];\n\nfunction isDuration(typeRef) {\n  return durations.includes(typeRef);\n}\n"],"file":"SimpleDurationEdit.js"}