{"version":3,"sources":["../../../../src/features/allowed-values/behavior/AllowedValuesUpdateBehavior.js"],"names":["CommandInterceptor","is","isInput","AllowedValuesUpdateBehavior","eventBus","modeling","postExecuted","event","context","element","properties","actualProperties","inputExpression","typeRef","target","$parent","editAllowedValues","$inject"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,kBAAP,MAA+B,2CAA/B;AAEA,SAASC,EAAT,EAAaC,OAAb,QAA4B,kCAA5B;AAEA;AACA;AACA;AACA;;IACqBC,2B;;;;;AAEnB,uCAAYC,QAAZ,EAAsBC,QAAtB,EAAgC;AAAA;;AAAA;;AAC9B,8BAAMD,QAAN;;AAEA,UAAKE,YAAL,CAAkB,0BAAlB,EAA8C,UAAAC,KAAK,EAAI;AACrD,2BAGIA,KAAK,CAACC,OAHV;AAAA,UACEC,OADF,kBACEA,OADF;AAAA,UAEEC,UAFF,kBAEEA,UAFF;AAKA,UAAMC,gBAAgB,GAAGT,OAAO,CAACO,OAAD,CAAP,GAAmBC,UAAU,CAACE,eAA9B,GAAgDF,UAAzE;;AAEA,UAAIC,gBAAgB,IACfA,gBAAgB,CAACE,OADlB,IAECF,gBAAgB,CAACE,OAAjB,KAA6B,QAFlC,EAE4C;AAE1C,YAAMC,MAAM,GACVb,EAAE,CAACQ,OAAD,EAAU,uBAAV,CAAF,GACEA,OAAO,CAACM,OADV,GAEEN,OAHJ,CAF0C,CAQ1C;;AACAJ,QAAAA,QAAQ,CAACW,iBAAT,CAA2BF,MAA3B,EAAmC,IAAnC;AACD;AACF,KArBD;;AAH8B;AAyB/B;;;EA3BsDd,kB;;SAApCG,2B;AA8BrBA,2BAA2B,CAACc,OAA5B,GAAsC,CACpC,UADoC,EAEpC,UAFoC,CAAtC","sourcesContent":["import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is, isInput } from 'dmn-js-shared/lib/util/ModelUtil';\n\n/**\n * Makes sure allowed values are removed if type is set to\n * something other than string.\n */\nexport default class AllowedValuesUpdateBehavior extends CommandInterceptor {\n\n  constructor(eventBus, modeling) {\n    super(eventBus);\n\n    this.postExecuted('element.updateProperties', event => {\n      const {\n        element,\n        properties\n      } = event.context;\n\n      const actualProperties = isInput(element) ? properties.inputExpression : properties;\n\n      if (actualProperties\n        && actualProperties.typeRef\n        && actualProperties.typeRef !== 'string') {\n\n        const target = (\n          is(element, 'dmn:LiteralExpression') ?\n            element.$parent :\n            element\n        );\n\n        // delete allowed values\n        modeling.editAllowedValues(target, null);\n      }\n    });\n  }\n}\n\nAllowedValuesUpdateBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];"],"file":"AllowedValuesUpdateBehavior.js"}