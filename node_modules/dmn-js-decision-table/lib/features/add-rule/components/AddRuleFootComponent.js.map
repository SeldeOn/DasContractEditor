{"version":3,"sources":["../../../../src/features/add-rule/components/AddRuleFootComponent.js"],"names":["Component","inject","AddRuleFootComponent","props","context","e","stopPropagation","addRule","target","dataset","colIndex","bind","_eventBus","injector","get","fire","cols","cells","sheet","getRoot","businessObject","input","length","push","i","className","placeholder","$instanceOf","handleClick","$inject"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,SAAT,QAA0B,SAA1B;AAEA,SACEC,MADF,QAEO,yBAFP;;IAIqBC,oB;;;;;AACnB,gCAAYC,KAAZ,EAAmBC,OAAnB,EAA4B;AAAA;;AAAA;;AAC1B,8BAAMD,KAAN,EAAaC,OAAb;;AAD0B,kEAYd,UAACC,CAAD,EAAO;AACnBA,MAAAA,CAAC,CAACC,eAAF;;AAEA,YAAKC,OAAL,CAAaF,CAAC,CAACG,MAAF,CAASC,OAAT,CAAiBC,QAA9B;AACD,KAhB2B;;AAG1BT,IAAAA,MAAM,+BAAN;AAEA,UAAKM,OAAL,GAAe,MAAKA,OAAL,CAAaI,IAAb,+BAAf;AAL0B;AAM3B;;;;WAED,8BAAqB;AACnB,WAAKC,SAAL,GAAiB,KAAKR,OAAL,CAAaS,QAAb,CAAsBC,GAAtB,CAA0B,UAA1B,CAAjB;AACD;;;WAQD,iBAAQJ,QAAR,EAAkB;AAChB,WAAKE,SAAL,CAAeG,IAAf,CAAoB,SAApB,EAA+B;AAAEL,QAAAA,QAAQ,EAARA;AAAF,OAA/B;AACD;;;WAED,kBAAS;AACP,UAAQM,IAAR,GAAiB,KAAKb,KAAtB,CAAQa,IAAR;AAEA,UAAMC,KAAK,GAAG,sBACE,cADF,yBAEM,2BAFN;AAAA,iBAEwC;AAFxC,aAAd;;AAMA,gCAA2B,KAAKC,KAAL,CAAWC,OAAX,EAA3B;AAAA,UAAQC,cAAR,uBAAQA,cAAR;;AAEA,UAAI,CAACA,cAAc,CAACC,KAAhB,IAAyB,CAACD,cAAc,CAACC,KAAf,CAAqBC,MAAnD,EAA2D;AACzDL,QAAAA,KAAK,CAACM,IAAN,sBAAyB,YAAzB;AACD;;AAED,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,IAAI,CAACM,MAAL,GAAc,CAAlC,EAAqCE,CAAC,EAAtC,EAA0C;AACxC,YAAIC,SAAS,GAAG,UAAhB;;AAEA,YAAML,eAAc,GAAGJ,IAAI,CAACQ,CAAD,CAAJ,IAAWR,IAAI,CAACQ,CAAD,CAAJ,CAAQJ,cAA1C;;AAEA,YAAIM,WAAW,GAAG,EAAlB;;AAEA,YAAIN,eAAJ,EAAoB;AAClB,cAAIA,eAAc,CAACO,WAAf,CAA2B,iBAA3B,CAAJ,EAAmD;AACjDF,YAAAA,SAAS,IAAI,aAAb;AACAC,YAAAA,WAAW,GAAG,GAAd;AACD;;AAED,cAAIN,eAAc,CAACO,WAAf,CAA2B,kBAA3B,CAAJ,EAAoD;AAClDF,YAAAA,SAAS,IAAI,cAAb;AACD;AACF,SATD,MASO;AACLA,UAAAA,SAAS,IAAI,aAAb;AACD;;AAEDR,QAAAA,KAAK,CAACM,IAAN,sBAA2BE,SAA3B,EAA6DC,WAA7D;AAAA,4BAAwDF;AAAxD;AACD;;AAED,qCAEc,qBAFd,6BAKQP,KALR;AAAA,mBAGc,KAAKW;AAHnB;AASD;;;;EAtE+C5B,S;;SAA7BE,oB;AAyErBA,oBAAoB,CAAC2B,OAArB,GAA+B,CAAE,OAAF,CAA/B","sourcesContent":["import { Component } from 'inferno';\n\nimport {\n  inject\n} from 'table-js/lib/components';\n\nexport default class AddRuleFootComponent extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    inject(this);\n\n    this.addRule = this.addRule.bind(this);\n  }\n\n  componentWillMount() {\n    this._eventBus = this.context.injector.get('eventBus');\n  }\n\n  handleClick = (e) => {\n    e.stopPropagation();\n\n    this.addRule(e.target.dataset.colIndex);\n  }\n\n  addRule(colIndex) {\n    this._eventBus.fire('addRule', { colIndex });\n  }\n\n  render() {\n    const { cols } = this.props;\n\n    const cells = [\n      <td className=\"add-rule-add\">\n        <span className=\"dmn-icon-plus action-icon\" title=\"Add Rule\"></span>\n      </td>\n    ];\n\n    const { businessObject } = this.sheet.getRoot();\n\n    if (!businessObject.input || !businessObject.input.length) {\n      cells.push(<td className=\"input-cell\">-</td>);\n    }\n\n    for (let i = 0; i < cols.length + 1; i++) {\n      let className = 'add-rule';\n\n      const businessObject = cols[i] && cols[i].businessObject;\n\n      let placeholder = '';\n\n      if (businessObject) {\n        if (businessObject.$instanceOf('dmn:InputClause')) {\n          className += ' input-cell';\n          placeholder = '-';\n        }\n\n        if (businessObject.$instanceOf('dmn:OutputClause')) {\n          className += ' output-cell';\n        }\n      } else {\n        className += ' annotation';\n      }\n\n      cells.push(<td className={ className } data-col-index={ i }>{placeholder}</td>);\n    }\n\n    return (\n      <tfoot\n        className=\"actionable add-rule\"\n        onClick={ this.handleClick }>\n        <tr>\n          { cells }\n        </tr>\n      </tfoot>\n    );\n  }\n}\n\nAddRuleFootComponent.$inject = [ 'sheet' ];\n"],"file":"AddRuleFootComponent.js"}