{"version":3,"sources":["../../../src/features/context-menu/ContextMenu.js"],"names":["is","Cell","ContextMenu","components","contextMenu","clipboard","editorActions","eventBus","elementRegistry","modeling","selection","sheet","rules","translate","_contextMenu","_clipboard","_editorActions","_elementRegistry","_eventBus","_modeling","_selection","_sheet","_rules","_translate","_getEntries","bind","onGetComponent","context","contextMenuType","entries","element","get","id","additionalCellEntries","isCell","getComponents","length","cellEntriesGroup","concat","on","event","node","preventDefault","open","x","pageX","y","pageY","handlers","addRuleAbove","rule","selectedIndex","cells","map","cell","indexOf","newRule","trigger","select","close","addRuleBelow","removeRule","addInputLeft","input","addInputRight","removeInput","addOutputLeft","output","addOutputRight","removeOutput","copy","cut","pasteBefore","pasteAfter","clipboardData","row","canPaste","allowed","data","elements","target","push","actualElement","col","canRemove","$inject"],"mappings":"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","sourcesContent":["/* eslint-disable max-len */\r\n\r\nimport { is } from 'dmn-js-shared/lib/util/ModelUtil';\r\n\r\nimport { Cell } from 'table-js/lib/model';\r\n\r\nexport default class ContextMenu {\r\n  constructor(\r\n      components,\r\n      contextMenu,\r\n      clipboard,\r\n      editorActions,\r\n      eventBus,\r\n      elementRegistry,\r\n      modeling,\r\n      selection,\r\n      sheet,\r\n      rules,\r\n      translate) {\r\n\r\n    this._contextMenu = contextMenu;\r\n    this._clipboard = clipboard;\r\n    this._editorActions = editorActions;\r\n    this._elementRegistry = elementRegistry;\r\n    this._eventBus = eventBus;\r\n    this._modeling = modeling;\r\n    this._selection = selection;\r\n    this._sheet = sheet;\r\n    this._rules = rules;\r\n    this._translate = translate;\r\n\r\n    this._getEntries = this._getEntries.bind(this);\r\n\r\n    components.onGetComponent('context-menu', (context = {}) => {\r\n      if (context.contextMenuType && context.contextMenuType === 'context-menu') {\r\n        const entries = this._getEntries(context);\r\n\r\n        const element = this._elementRegistry.get(context.id);\r\n\r\n        const additionalCellEntries = isCell(element)\r\n          && components.getComponents('context-menu-cell-additional', context);\r\n\r\n        if (additionalCellEntries && additionalCellEntries.length) {\r\n          const cellEntriesGroup = (\r\n            <div className=\"context-menu-group context-menu-group-cell\">\r\n              { additionalCellEntries }\r\n            </div>\r\n          );\r\n\r\n          return () => (\r\n            <div className=\"context-menu-flex\">\r\n              { (entries || []).concat(cellEntriesGroup) }\r\n            </div>\r\n          );\r\n        } else {\r\n          return () => (\r\n            <div className=\"context-menu-flex\">\r\n              { entries || [] }\r\n            </div>\r\n          );\r\n        }\r\n      }\r\n    });\r\n\r\n    eventBus.on('cell.contextmenu', ({ event, id, node }) => {\r\n      event.preventDefault();\r\n\r\n      contextMenu.open({\r\n        x: event.pageX,\r\n        y: event.pageY\r\n      }, {\r\n        contextMenuType: 'context-menu',\r\n        event,\r\n        id\r\n      });\r\n    });\r\n  }\r\n\r\n  _getEntries(context) {\r\n    const handlers = {\r\n      addRuleAbove: (rule) => {\r\n        const selectedIndex = rule.cells.map(cell => cell.id).indexOf(context.id);\r\n        const newRule = this._editorActions.trigger('addRuleAbove', { rule });\r\n\r\n        if (newRule.cells[selectedIndex]) {\r\n          this._selection.select(newRule.cells[selectedIndex]);\r\n        } else {\r\n          this._selection.select(newRule.cells[0]);\r\n        }\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      addRuleBelow: (rule) => {\r\n        const selectedIndex = rule.cells.map(cell => cell.id).indexOf(context.id);\r\n        const newRule = this._editorActions.trigger('addRuleBelow', { rule });\r\n\r\n        if (newRule.cells[selectedIndex]) {\r\n          this._selection.select(newRule.cells[selectedIndex]);\r\n        } else {\r\n          this._selection.select(newRule.cells[0]);\r\n        }\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      removeRule: (rule) => {\r\n        this._editorActions.trigger('removeRule', { rule });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      addInputLeft: (input) => {\r\n        this._editorActions.trigger('addInputLeft', { input });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      addInputRight: (input) => {\r\n        this._editorActions.trigger('addInputRight', { input });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      removeInput: (input) => {\r\n        this._editorActions.trigger('removeInput', { input });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      addOutputLeft: (output) => {\r\n        this._editorActions.trigger('addOutputLeft', { output });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      addOutputRight: (output) => {\r\n        this._editorActions.trigger('addOutputRight', { output });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      removeOutput: (output) => {\r\n        this._editorActions.trigger('removeOutput', { output });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      copy: element => {\r\n        this._editorActions.trigger('copy', { element });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      cut: element => {\r\n        this._editorActions.trigger('cut', { element });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      pasteBefore: element => {\r\n        this._editorActions.trigger('pasteBefore', { element });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      pasteAfter: element => {\r\n        this._editorActions.trigger('pasteAfter', { element });\r\n\r\n        this._contextMenu.close();\r\n      }\r\n    };\r\n\r\n    const id = context && context.id;\r\n\r\n    if (!id) {\r\n      return null;\r\n    }\r\n\r\n    const element = this._elementRegistry.get(id);\r\n\r\n    if (!element) {\r\n      return null;\r\n    }\r\n\r\n    const clipboardData = this._clipboard.get() || {};\r\n\r\n    const entries = [];\r\n\r\n    const row = element.row || element;\r\n    if (is(row, 'dmn:DecisionRule')) {\r\n      const canPaste = this._rules.allowed('paste', {\r\n        data: clipboardData.elements,\r\n        target: row\r\n      });\r\n\r\n      entries.push(\r\n        <div className=\"context-menu-group\">\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-copy-rule\"\r\n            onClick={ () => handlers.copy(row) }>\r\n            { this._translate('Copy Rule') }\r\n          </div>\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-cut-rule\"\r\n            onClick={ () => handlers.cut(row) }>\r\n            { this._translate('Cut Rule') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canPaste ? '' : 'disabled' } context-menu-entry-paste-rule-above` }\r\n            onClick={ () => handlers.pasteBefore(row) }>\r\n            { this._translate('Paste Rule Above') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canPaste ? '' : 'disabled' } context-menu-entry-paste-rule-below` }\r\n            onClick={ () => handlers.pasteAfter(row) }>\r\n            { this._translate('Paste Rule Below') }\r\n          </div>\r\n        </div>,\r\n        <div className=\"context-menu-group\">\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-add-rule-above\"\r\n            onClick={ () => handlers.addRuleAbove(row) }>\r\n            { this._translate('Add Rule Above') }\r\n          </div>\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-add-rule-below\"\r\n            onClick={ () => handlers.addRuleBelow(row) }>\r\n            { this._translate('Add Rule Below') }\r\n          </div>\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-remove-rule\"\r\n            onClick={ () => handlers.removeRule(row) }>\r\n            { this._translate('Remove Rule') }\r\n          </div>\r\n        </div>\r\n      );\r\n    } else if (is(element, 'dmn:InputClause')) {\r\n      const actualElement = is(element, 'dmn:InputClause') ? element : element.col;\r\n\r\n      const canRemove = this._rules.allowed('col.remove', {\r\n        col: element.col || element\r\n      });\r\n\r\n      const canPaste = this._rules.allowed('paste', {\r\n        data: clipboardData.elements,\r\n        target: element.col || element\r\n      });\r\n\r\n      entries.push(\r\n        <div className=\"context-menu-group\">\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-copy-input\"\r\n            onClick={ () => handlers.copy(actualElement) }>\r\n            { this._translate('Copy Input Column') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canRemove ? '' : 'disabled' } context-menu-entry-cut-input` }\r\n            onClick={ () => handlers.cut(actualElement) }>\r\n            { this._translate('Cut Input Column') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canPaste ? '' : 'disabled' } context-menu-entry-paste-input-left` }\r\n            onClick={ () => handlers.pasteBefore(actualElement) }>\r\n            { this._translate('Paste Input Column Left') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canPaste ? '' : 'disabled' } context-menu-entry-paste-input-right` }\r\n            onClick={ () => handlers.pasteAfter(actualElement) }>\r\n            { this._translate('Paste Input Column Right') }\r\n          </div>\r\n        </div>,\r\n        <div className=\"context-menu-group\">\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-add-input-left\"\r\n            onClick={ () => handlers.addInputLeft(actualElement) }>\r\n            { this._translate('Add Input Column Left') }\r\n          </div>\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-add-input-right\"\r\n            onClick={ () => handlers.addInputRight(actualElement) }>\r\n            { this._translate('Add Input Column Right') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canRemove ? '' : 'disabled' } context-menu-entry-remove-input` }\r\n            onClick={ () => handlers.removeInput(actualElement) }>\r\n            { this._translate('Remove Input Column') }\r\n          </div>\r\n        </div>\r\n      );\r\n    } else if (is(element, 'dmn:OutputClause') || is(element.col, 'dmn:OutputClause')) {\r\n      const actualElement = is(element, 'dmn:OutputClause') ? element : element.col;\r\n\r\n      const canRemove = this._rules.allowed('col.remove', {\r\n        col: element.col || element\r\n      });\r\n\r\n      const canPaste = this._rules.allowed('paste', {\r\n        data: clipboardData.elements,\r\n        target: element.col || element\r\n      });\r\n\r\n      entries.push(\r\n        <div className=\"context-menu-group\">\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-copy-output\"\r\n            onClick={ () => handlers.copy(actualElement) }>\r\n            { this._translate('Copy Output Column') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canRemove ? '' : 'disabled' } context-menu-entry-cut-output` }\r\n            onClick={ () => handlers.cut(actualElement) }>\r\n            { this._translate('Cut Output Column') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canPaste ? '' : 'disabled' } context-menu-entry-paste-output-left` }\r\n            onClick={ () => handlers.pasteBefore(actualElement) }>\r\n            { this._translate('Paste Output Column Left') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canPaste ? '' : 'disabled' } context-menu-entry-paste-output-right` }\r\n            onClick={ () => handlers.pasteAfter(actualElement) }>\r\n            { this._translate('Paste Output Column Right') }\r\n          </div>\r\n        </div>,\r\n        <div className=\"context-menu-group\">\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-add-output-left\"\r\n            onClick={ () => handlers.addOutputLeft(actualElement) }>\r\n            { this._translate('Add Output Column Left') }\r\n          </div>\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-add-output-right\"\r\n            onClick={ () => handlers.addOutputRight(actualElement) }>\r\n            { this._translate('Add Output Column Right') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canRemove ? '' : 'disabled' } context-menu-entry-remove-output` }\r\n            onClick={ () => handlers.removeOutput(actualElement) }>\r\n            { this._translate('Remove Output Column') }\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return entries;\r\n  }\r\n}\r\n\r\nContextMenu.$inject = [\r\n  'components',\r\n  'contextMenu',\r\n  'clipboard',\r\n  'editorActions',\r\n  'eventBus',\r\n  'elementRegistry',\r\n  'modeling',\r\n  'selection',\r\n  'sheet',\r\n  'rules',\r\n  'translate'\r\n];\r\n\r\n// helpers ///////////\r\n\r\nfunction isCell(element) {\r\n  return element instanceof Cell;\r\n}"],"file":"ContextMenu.js"}