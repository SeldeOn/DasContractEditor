{"version":3,"sources":["../../../src/features/editor-actions/DrdEditorActions.js"],"names":["inherits","EditorActions","DrdEditorActions","injector","invoke","$inject","prototype","_registerDefaultActions","call","canvas","get","elementRegistry","selection","lassoTool","handTool","directEditing","distributeElements","alignElements","_registerAction","rootElement","getRootElement","elements","filter","element","select","opts","currentSelection","type","length","trigger","toggle","activate"],"mappings":"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","sourcesContent":["import inherits from 'inherits';\n\nimport EditorActions from 'diagram-js/lib/features/editor-actions/EditorActions';\n\nexport default function DrdEditorActions(injector) {\n  injector.invoke(EditorActions, this);\n}\n\ninherits(DrdEditorActions, EditorActions);\n\nDrdEditorActions.$inject = [\n  'injector'\n];\n\n\n/**\n * Register default actions.\n *\n * @param {Injector} injector\n */\nDrdEditorActions.prototype._registerDefaultActions = function(injector) {\n\n  // (0) invoke super method\n\n  EditorActions.prototype._registerDefaultActions.call(this, injector);\n\n  // (1) retrieve optional components to integrate with\n\n  var canvas = injector.get('canvas', false);\n  var elementRegistry = injector.get('elementRegistry', false);\n  var selection = injector.get('selection', false);\n  var lassoTool = injector.get('lassoTool', false);\n  var handTool = injector.get('handTool', false);\n  var directEditing = injector.get('directEditing', false);\n  var distributeElements = injector.get('distributeElements', false);\n  var alignElements = injector.get('alignElements', false);\n\n  // (2) check components and register actions\n\n  if (canvas && elementRegistry && selection) {\n    this._registerAction('selectElements', function() {\n\n      // select all elements except for the invisible\n      // root element\n      var rootElement = canvas.getRootElement();\n\n      var elements = elementRegistry.filter(function(element) {\n        return element !== rootElement;\n      });\n\n      selection.select(elements);\n\n      return elements;\n    });\n  }\n\n  if (selection && distributeElements) {\n    this._registerAction('distributeElements', function(opts) {\n      var currentSelection = selection.get(),\n          type = opts.type;\n\n      if (currentSelection.length > 2) {\n        distributeElements.trigger(currentSelection, type);\n      }\n    });\n  }\n\n  if (selection && alignElements) {\n    this._registerAction('alignElements', function(opts) {\n      var currentSelection = selection.get(),\n          type = opts.type;\n\n      if (currentSelection.length > 1) {\n        alignElements.trigger(currentSelection, type);\n      }\n    });\n  }\n\n  if (lassoTool) {\n    this._registerAction('lassoTool', function() {\n      lassoTool.toggle();\n    });\n  }\n\n  if (handTool) {\n    this._registerAction('handTool', function() {\n      handTool.toggle();\n    });\n  }\n\n  if (selection && directEditing) {\n    this._registerAction('directEditing', function() {\n      var currentSelection = selection.get();\n\n      if (currentSelection.length) {\n        directEditing.activate(currentSelection[0]);\n      }\n    });\n  }\n};\n"],"file":"DrdEditorActions.js"}