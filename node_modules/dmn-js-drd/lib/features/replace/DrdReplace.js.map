{"version":3,"sources":["../../../src/features/replace/DrdReplace.js"],"names":["DrdReplace","drdFactory","replace","selection","modeling","replaceElement","element","target","hints","type","oldBusinessObject","businessObject","newBusinessObject","create","newElement","width","height","name","table","decisionLogic","$parent","output","typeRef","input","inputExpression","expression","variable","$inject"],"mappings":"AAAA;AACA;AACA;AACA,eAAe,SAASA,UAAT,CAAoBC,UAApB,EAAgCC,OAAhC,EAAyCC,SAAzC,EAAoDC,QAApD,EAA8D;AAE3E;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE,WAASC,cAAT,CAAwBC,OAAxB,EAAiCC,MAAjC,EAAyCC,KAAzC,EAAgD;AAE9CA,IAAAA,KAAK,GAAGA,KAAK,IAAI,EAAjB;AAEA,QAAIC,IAAI,GAAGF,MAAM,CAACE,IAAlB;AAAA,QACIC,iBAAiB,GAAGJ,OAAO,CAACK,cADhC;AAGA,QAAIC,iBAAiB,GAAGX,UAAU,CAACY,MAAX,CAAkBJ,IAAlB,CAAxB;AAEA,QAAIK,UAAU,GAAG;AACfL,MAAAA,IAAI,EAAEA,IADS;AAEfE,MAAAA,cAAc,EAAEC;AAFD,KAAjB;AAKAE,IAAAA,UAAU,CAACC,KAAX,GAAmBT,OAAO,CAACS,KAA3B;AACAD,IAAAA,UAAU,CAACE,MAAX,GAAoBV,OAAO,CAACU,MAA5B;AAEAJ,IAAAA,iBAAiB,CAACK,IAAlB,GAAyBP,iBAAiB,CAACO,IAA3C;;AAEA,QAAIV,MAAM,CAACW,KAAX,EAAkB;AAChB,UAAIA,KAAK,GAAGjB,UAAU,CAACY,MAAX,CAAkB,mBAAlB,CAAZ;AACAD,MAAAA,iBAAiB,CAACO,aAAlB,GAAkCD,KAAlC;AACAA,MAAAA,KAAK,CAACE,OAAN,GAAgBR,iBAAhB;AAEA,UAAIS,MAAM,GAAGpB,UAAU,CAACY,MAAX,CAAkB,kBAAlB,CAAb;AACAQ,MAAAA,MAAM,CAACC,OAAP,GAAiB,QAAjB;AACAD,MAAAA,MAAM,CAACD,OAAP,GAAiBF,KAAjB;AACAA,MAAAA,KAAK,CAACG,MAAN,GAAe,CAAEA,MAAF,CAAf;AAEA,UAAIE,KAAK,GAAGtB,UAAU,CAACY,MAAX,CAAkB,iBAAlB,CAAZ;AACAU,MAAAA,KAAK,CAACH,OAAN,GAAgBF,KAAhB;AAEA,UAAIM,eAAe,GAAGvB,UAAU,CAACY,MAAX,CAAkB,uBAAlB,EAA2C;AAC/DS,QAAAA,OAAO,EAAE;AADsD,OAA3C,CAAtB;AAIAC,MAAAA,KAAK,CAACC,eAAN,GAAwBA,eAAxB;AACAA,MAAAA,eAAe,CAACJ,OAAhB,GAA0BG,KAA1B;AAEAL,MAAAA,KAAK,CAACK,KAAN,GAAc,CAAEA,KAAF,CAAd;AACD;;AAED,QAAIhB,MAAM,CAACkB,UAAX,EAAuB;AACrBb,MAAAA,iBAAiB,CAACO,aAAlB,GAAkClB,UAAU,CAACY,MAAX,CAAkB,uBAAlB,CAAlC;AACAD,MAAAA,iBAAiB,CAACc,QAAlB,GAA6BzB,UAAU,CAACY,MAAX,CAAkB,qBAAlB,CAA7B;AACD;;AAED,WAAOX,OAAO,CAACG,cAAR,CAAuBC,OAAvB,EAAgCQ,UAAhC,EAA4CN,KAA5C,CAAP;AACD;;AAED,OAAKH,cAAL,GAAsBA,cAAtB;AACD;AAEDL,UAAU,CAAC2B,OAAX,GAAqB,CACnB,YADmB,EAEnB,SAFmB,EAGnB,WAHmB,EAInB,UAJmB,CAArB","sourcesContent":["/**\n * This module takes care of replacing DRD elements\n */\nexport default function DrdReplace(drdFactory, replace, selection, modeling) {\n\n  /**\n   * Prepares a new business object for the replacement element\n   * and triggers the replace operation.\n   *\n   * @param  {djs.model.Base} element\n   * @param  {Object} target\n   * @param  {Object} [hints]\n   *\n   * @return {djs.model.Base} the newly created element\n   */\n  function replaceElement(element, target, hints) {\n\n    hints = hints || {};\n\n    var type = target.type,\n        oldBusinessObject = element.businessObject;\n\n    var newBusinessObject = drdFactory.create(type);\n\n    var newElement = {\n      type: type,\n      businessObject: newBusinessObject\n    };\n\n    newElement.width = element.width;\n    newElement.height = element.height;\n\n    newBusinessObject.name = oldBusinessObject.name;\n\n    if (target.table) {\n      var table = drdFactory.create('dmn:DecisionTable');\n      newBusinessObject.decisionLogic = table;\n      table.$parent = newBusinessObject;\n\n      var output = drdFactory.create('dmn:OutputClause');\n      output.typeRef = 'string';\n      output.$parent = table;\n      table.output = [ output ];\n\n      var input = drdFactory.create('dmn:InputClause');\n      input.$parent = table;\n\n      var inputExpression = drdFactory.create('dmn:LiteralExpression', {\n        typeRef: 'string'\n      });\n\n      input.inputExpression = inputExpression;\n      inputExpression.$parent = input;\n\n      table.input = [ input ];\n    }\n\n    if (target.expression) {\n      newBusinessObject.decisionLogic = drdFactory.create('dmn:LiteralExpression');\n      newBusinessObject.variable = drdFactory.create('dmn:InformationItem');\n    }\n\n    return replace.replaceElement(element, newElement, hints);\n  }\n\n  this.replaceElement = replaceElement;\n}\n\nDrdReplace.$inject = [\n  'drdFactory',\n  'replace',\n  'selection',\n  'modeling'\n];\n"],"file":"DrdReplace.js"}