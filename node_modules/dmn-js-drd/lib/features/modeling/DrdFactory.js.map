{"version":3,"sources":["../../../src/features/modeling/DrdFactory.js"],"names":["assign","pick","isAny","DrdFactory","moddle","_model","$inject","prototype","_needsId","element","_ensureId","prefix","$type","replace","id","ids","nextPrefixed","create","type","attrs","createDiShape","semantic","bounds","dmnElementRef","createDiBounds","createDiEdge","waypoints","waypoint","createDiWaypoints","self","map","createDiWaypoint","createExtensionElements","values"],"mappings":"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","sourcesContent":["import {\n  assign,\n  pick\n} from 'min-dash';\n\nimport { isAny } from 'dmn-js-shared/lib/util/ModelUtil';\n\n\nexport default function DrdFactory(moddle) {\n  this._model = moddle;\n}\n\nDrdFactory.$inject = [ 'moddle' ];\n\n\nDrdFactory.prototype._needsId = function(element) {\n  return isAny(element, [\n    'dmn:Artifact',\n    'dmn:DMNElement',\n    'dmn:DRGElement',\n    'dmndi:DMNDiagram',\n    'dmndi:DMNDiagramElement'\n  ]);\n};\n\nDrdFactory.prototype._ensureId = function(element) {\n  var prefix = (element.$type || '').replace(/^[^:]*:/g, '') + '_';\n\n  if (!element.id && this._needsId(element)) {\n    element.id = this._model.ids.nextPrefixed(prefix, element);\n  }\n};\n\nDrdFactory.prototype.create = function(type, attrs) {\n  var element = this._model.create(type, attrs || {});\n\n  this._ensureId(element);\n\n  return element;\n};\n\nDrdFactory.prototype.createDiShape = function(semantic, bounds, attrs) {\n\n  return this.create('dmndi:DMNShape', assign({\n    dmnElementRef: semantic,\n    bounds: this.createDiBounds(bounds)\n  }, attrs));\n};\n\nDrdFactory.prototype.createDiBounds = function(bounds) {\n  return this.create('dc:Bounds', bounds);\n};\n\nDrdFactory.prototype.createDiEdge = function(semantic, waypoints, attrs) {\n  return this.create('dmndi:DMNEdge', {\n    dmnElementRef: semantic,\n    waypoint: this.createDiWaypoints(waypoints)\n  }, attrs);\n};\n\nDrdFactory.prototype.createDiWaypoints = function(waypoints) {\n  var self = this;\n\n  return waypoints.map(function(waypoint) {\n    return self.createDiWaypoint(waypoint);\n  });\n};\n\nDrdFactory.prototype.createDiWaypoint = function(waypoint) {\n  return this.create('dc:Point', pick(waypoint, [ 'x', 'y' ]));\n};\n\nDrdFactory.prototype.createExtensionElements = function() {\n  return this.create('dmn:ExtensionElements', { values: [] });\n};\n"],"file":"DrdFactory.js"}