{"version":3,"sources":["../../../src/features/modeling/Modeling.js"],"names":["inherits","BaseModeling","IdClaimHandler","UpdateLabelHandler","UpdatePropertiesHandler","Modeling","canvas","drdRules","injector","_canvas","_drdRules","invoke","$inject","prototype","claimId","id","moddleElement","_commandStack","execute","element","claiming","connect","source","target","attrs","hints","rootElement","getRootElement","canConnect","type","createConnection","getHandlers","handlers","call","unclaimId","updateProperties","properties","updateLabel","newLabel","newBounds"],"mappings":"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","sourcesContent":["import inherits from 'inherits';\n\nimport BaseModeling from 'diagram-js/lib/features/modeling/Modeling';\n\nimport IdClaimHandler from './cmd/IdClaimHandler.js';\nimport UpdateLabelHandler from '../label-editing/cmd/UpdateLabelHandler.js';\nimport UpdatePropertiesHandler from './cmd/UpdatePropertiesHandler.js';\n\n\n/**\n * DMN modeling.\n *\n * @param {Canvas} canvas\n * @param {CommandStack} commandStack\n * @param {DrdRules} drdRules\n * @param {ElementFactory} elementFactory\n * @param {EventBus} eventBus\n */\nexport default function Modeling(\n    canvas,\n    drdRules,\n    injector\n) {\n  this._canvas = canvas;\n  this._drdRules = drdRules;\n\n  injector.invoke(BaseModeling, this);\n}\n\ninherits(Modeling, BaseModeling);\n\nModeling.$inject = [\n  'canvas',\n  'drdRules',\n  'injector'\n];\n\nModeling.prototype.claimId = function(id, moddleElement) {\n  this._commandStack.execute('id.updateClaim', {\n    id: id,\n    element: moddleElement,\n    claiming: true\n  });\n};\n\nModeling.prototype.connect = function(source, target, attrs, hints) {\n  var drdRules = this._drdRules,\n      rootElement = this._canvas.getRootElement();\n\n  if (!attrs) {\n    attrs = drdRules.canConnect(source, target) || { type: 'dmn:Association' };\n  }\n\n  return this.createConnection(source, target, attrs, rootElement, hints);\n};\n\nModeling.prototype.getHandlers = function() {\n  var handlers = BaseModeling.prototype.getHandlers.call(this);\n\n  handlers['id.updateClaim'] = IdClaimHandler;\n  handlers['element.updateLabel'] = UpdateLabelHandler;\n  handlers['element.updateProperties'] = UpdatePropertiesHandler;\n\n  return handlers;\n};\n\nModeling.prototype.unclaimId = function(id, moddleElement) {\n  this._commandStack.execute('id.updateClaim', {\n    id: id,\n    element: moddleElement\n  });\n};\n\nModeling.prototype.updateProperties = function(element, properties) {\n  this._commandStack.execute('element.updateProperties', {\n    element: element,\n    properties: properties\n  });\n};\n\nModeling.prototype.updateLabel = function(element, newLabel, newBounds, hints) {\n  this._commandStack.execute('element.updateLabel', {\n    element: element,\n    newLabel: newLabel,\n    newBounds: newBounds,\n    hints: hints || {}\n  });\n};\n"],"file":"Modeling.js"}