{"version":3,"sources":["../../../src/features/editor-actions/EditorActions.js"],"names":["forEach","NOT_REGISTERED_ERROR","IS_REGISTERED_ERROR","EditorActions","commandStack","eventBus","_actions","undo","redo","action","opts","error","actions","listener","_registerAction","isRegistered","undefined","$inject","message","Error"],"mappings":";;;;;;AAAA,SAASA,OAAT,QAAwB,UAAxB;AAEA,IAAMC,oBAAoB,GAAG,4BAA7B;AAAA,IACMC,mBAAmB,GAAG,uBAD5B;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IACqBC,a;AACnB,yBAAYC,YAAZ,EAA0BC,QAA1B,EAAoC;AAAA;;AAElC,SAAKC,QAAL,GAAgB;AACdC,MAAAA,IADc,kBACP;AACLH,QAAAA,YAAY,CAACG,IAAb;AACD,OAHa;AAIdC,MAAAA,IAJc,kBAIP;AACLJ,QAAAA,YAAY,CAACI,IAAb;AACD;AANa,KAAhB;AAQD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;;;;WACE,iBAAQC,MAAR,EAAgBC,IAAhB,EAAsB;AACpB,UAAI,CAAC,KAAKJ,QAAL,CAAcG,MAAd,CAAL,EAA4B;AAC1B,cAAME,KAAK,CAACF,MAAD,EAASR,oBAAT,CAAX;AACD;;AAED,aAAO,KAAKK,QAAL,CAAcG,MAAd,EAAsBC,IAAtB,CAAP;AACD;AAED;AACF;AACA;AACA;AACA;AACA;;;;WACE,kBAASE,OAAT,EAAkBC,QAAlB,EAA4B;AAAA;;AAC1B,UAAI,OAAOD,OAAP,KAAmB,QAAvB,EAAiC;AAC/B,eAAO,KAAKE,eAAL,CAAqBF,OAArB,EAA8BC,QAA9B,CAAP;AACD;;AAEDb,MAAAA,OAAO,CAACY,OAAD,EAAU,UAACC,QAAD,EAAWJ,MAAX,EAAsB;AACrC,QAAA,KAAI,CAACK,eAAL,CAAqBL,MAArB,EAA6BI,QAA7B;AACD,OAFM,EAEJ,IAFI,CAAP;AAGD;AAED;AACF;AACA;AACA;AACA;AACA;;;;WACE,yBAAgBJ,MAAhB,EAAwBI,QAAxB,EAAkC;AAChC,UAAI,KAAKE,YAAL,CAAkBN,MAAlB,CAAJ,EAA+B;AAC7B,cAAME,KAAK,CAACF,MAAD,EAASP,mBAAT,CAAX;AACD;;AAED,WAAKI,QAAL,CAAcG,MAAd,IAAwBI,QAAxB;AACD;AAED;AACF;AACA;AACA;AACA;;;;WACE,oBAAWJ,MAAX,EAAmB;AACjB,UAAI,CAAC,KAAKM,YAAL,CAAkBN,MAAlB,CAAL,EAAgC;AAC9B,cAAME,KAAK,CAACF,MAAD,EAASR,oBAAT,CAAX;AACD;;AAED,WAAKK,QAAL,CAAcG,MAAd,IAAwBO,SAAxB;AACD;AAGD;AACF;AACA;AACA;AACA;AACA;AACA;;;;WACE,sBAAaP,MAAb,EAAqB;AACnB,aAAO,CAAC,CAAC,KAAKH,QAAL,CAAcG,MAAd,CAAT;AACD;;;;;;SAlFkBN,a;AAqFrBA,aAAa,CAACc,OAAd,GAAwB,CACtB,cADsB,EAEtB,UAFsB,CAAxB,C,CAKA;;AAEA,SAASN,KAAT,CAAeF,MAAf,EAAuBS,OAAvB,EAAgC;AAC9B,SAAO,IAAIC,KAAJ,CAAUV,MAAM,GAAG,GAAT,GAAeS,OAAzB,CAAP;AACD","sourcesContent":["import { forEach } from 'min-dash';\n\nconst NOT_REGISTERED_ERROR = 'is not a registered action',\n      IS_REGISTERED_ERROR = 'is already registered';\n\n\n/**\n * An interface that provides access to modeling actions by decoupling\n * the one who requests the action to be triggered and the trigger itself.\n *\n * It's possible to add new actions by registering them with ´registerAction´ and likewise\n * unregister existing ones with ´unregisterAction´.\n *\n */\nexport default class EditorActions {\n  constructor(commandStack, eventBus) {\n\n    this._actions = {\n      undo() {\n        commandStack.undo();\n      },\n      redo() {\n        commandStack.redo();\n      }\n    };\n  }\n\n  /**\n   * Triggers a registered action\n   *\n   * @param  {string} action\n   * @param  {Object} opts\n   *\n   * @return {Unknown} Returns what the registered listener returns\n   */\n  trigger(action, opts) {\n    if (!this._actions[action]) {\n      throw error(action, NOT_REGISTERED_ERROR);\n    }\n\n    return this._actions[action](opts);\n  }\n\n  /**\n   * Registers a collections of actions.\n   * The key of the object will be the name of the action.\n   *\n   * @param  {Object} actions\n   */\n  register(actions, listener) {\n    if (typeof actions === 'string') {\n      return this._registerAction(actions, listener);\n    }\n\n    forEach(actions, (listener, action) => {\n      this._registerAction(action, listener);\n    }, this);\n  }\n\n  /**\n   * Registers a listener to an action key\n   *\n   * @param  {string} action\n   * @param  {Function} listener\n   */\n  _registerAction(action, listener) {\n    if (this.isRegistered(action)) {\n      throw error(action, IS_REGISTERED_ERROR);\n    }\n\n    this._actions[action] = listener;\n  }\n\n  /**\n   * Unregister an existing action\n   *\n   * @param {string} action\n   */\n  unregister(action) {\n    if (!this.isRegistered(action)) {\n      throw error(action, NOT_REGISTERED_ERROR);\n    }\n\n    this._actions[action] = undefined;\n  }\n\n\n  /**\n   * Checks wether the given action is registered\n   *\n   * @param {string} action\n   *\n   * @return {boolean}\n   */\n  isRegistered(action) {\n    return !!this._actions[action];\n  }\n}\n\nEditorActions.$inject = [\n  'commandStack',\n  'eventBus'\n];\n\n// helpers /////////////\n\nfunction error(action, message) {\n  return new Error(action + ' ' + message);\n}"],"file":"EditorActions.js"}