{"version":3,"sources":["../../../../src/features/decision-properties/components/DecisionPropertiesEditorComponent.js"],"names":["Component","EditableComponent","DecisionPropertiesEditorComponent","props","context","forceUpdate","name","_modeling","editDecisionName","_viewer","injector","get","setupChangeListeners","bind","getDecision","id","unbind","changeSupport","offElementsChanged","onElementsChanged","resetScroll","setDecisionName","DecisionName","getClassName","getEditor","event","target","scroll"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,SAAT,QAA0B,SAA1B;AAEA,OAAOC,iBAAP,MAA8B,gDAA9B;;IAGqBC,iC;;;;;AAEnB,6CAAYC,KAAZ,EAAmBC,OAAnB,EAA4B;AAAA;;AAAA;;AAC1B,8BAAMD,KAAN,EAAaC,OAAb;;AAD0B,wEAqBR,YAAM;AACxB,YAAKC,WAAL;AACD,KAvB2B;;AAAA,sEAwCV,UAACC,IAAD,EAAU;AAC1B,YAAKC,SAAL,CAAeC,gBAAf,CAAgCF,IAAhC;AACD,KA1C2B;;AAG1B,UAAKG,OAAL,GAAeL,OAAO,CAACM,QAAR,CAAiBC,GAAjB,CAAqB,QAArB,CAAf;AACA,UAAKJ,SAAL,GAAiBH,OAAO,CAACM,QAAR,CAAiBC,GAAjB,CAAqB,UAArB,CAAjB;;AAEA,UAAKC,oBAAL,CAA0B;AACxBC,MAAAA,IAAI,EAAE,MAAKC,WAAL,GAAmBC;AADD,KAA1B;;AAN0B;AAS3B;;;;WAED,gCAAuB;AACrB,WAAKH,oBAAL,CAA0B;AACxBI,QAAAA,MAAM,EAAE,KAAKF,WAAL,GAAmBC;AADH,OAA1B;AAGD;;;WAED,uBAAc;AACZ,aAAO,KAAKN,OAAL,CAAaK,WAAb,EAAP;AACD;;;WAMD,oCAAuC;AAAA,UAAhBD,IAAgB,QAAhBA,IAAgB;AAAA,UAAVG,MAAU,QAAVA,MAAU;AAErC,UACEC,aADF,GAEI,KAAKb,OAFT,CACEa,aADF;;AAIA,UAAI,OAAOD,MAAP,KAAkB,QAAtB,EAAgC;AAC9BC,QAAAA,aAAa,CAACC,kBAAd,CAAiCF,MAAjC,EAAyC,KAAKG,iBAA9C;AACD;;AAED,UAAI,OAAON,IAAP,KAAgB,QAApB,EAA8B;AAC5BI,QAAAA,aAAa,CAACE,iBAAd,CAAgCN,IAAhC,EAAsC,KAAKM,iBAA3C;AACD;AACF;;;WAMD,kBAAS;AACP,8BAAiB,KAAKL,WAAL,EAAjB;AAAA,UAAQR,IAAR,qBAAQA,IAAR;;AAEA,sCACoB,qBADpB;AAAA,qBAGgB,sBAHhB;AAAA,iBAIcA,IAJd;AAAA,kBAKec,WALf;AAAA,oBAMiB,KAAKC;AANtB;AASD;;;;EA1D4DrB,S;;SAA1CE,iC;;IA6DfoB,Y;;;;;;;;;;;;;WAEJ,kBAAS;AAEP,kCACkB,KAAKC,YAAL,EADlB,EAEM,KAAKC,SAAL,EAFN;AAKD;;;;EATwBvB,iB;;AAa3B,SAASmB,WAAT,CAAqBK,KAArB,EAA4B;AAC1BA,EAAAA,KAAK,CAACC,MAAN,CAAaC,MAAb,CAAoB,CAApB,EAAuB,CAAvB;AACD","sourcesContent":["import { Component } from 'inferno';\r\n\r\nimport EditableComponent from 'dmn-js-shared/lib/components/EditableComponent';\r\n\r\n\r\nexport default class DecisionPropertiesEditorComponent extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this._viewer = context.injector.get('viewer');\r\n    this._modeling = context.injector.get('modeling');\r\n\r\n    this.setupChangeListeners({\r\n      bind: this.getDecision().id\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.setupChangeListeners({\r\n      unbind: this.getDecision().id\r\n    });\r\n  }\r\n\r\n  getDecision() {\r\n    return this._viewer.getDecision();\r\n  }\r\n\r\n  onElementsChanged = () => {\r\n    this.forceUpdate();\r\n  }\r\n\r\n  setupChangeListeners({ bind, unbind }) {\r\n\r\n    const {\r\n      changeSupport\r\n    } = this.context;\r\n\r\n    if (typeof unbind === 'string') {\r\n      changeSupport.offElementsChanged(unbind, this.onElementsChanged);\r\n    }\r\n\r\n    if (typeof bind === 'string') {\r\n      changeSupport.onElementsChanged(bind, this.onElementsChanged);\r\n    }\r\n  }\r\n\r\n  setDecisionName = (name) => {\r\n    this._modeling.editDecisionName(name);\r\n  }\r\n\r\n  render() {\r\n    const { name } = this.getDecision();\r\n\r\n    return (\r\n      <header className=\"decision-properties\">\r\n        <DecisionName\r\n          className=\"decision-name editor\"\r\n          value={ name }\r\n          onBlur={ resetScroll }\r\n          onChange={ this.setDecisionName } />\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nclass DecisionName extends EditableComponent {\r\n\r\n  render() {\r\n\r\n    return (\r\n      <h3 className={ this.getClassName() }>\r\n        { this.getEditor() }\r\n      </h3>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nfunction resetScroll(event) {\r\n  event.target.scroll(0, 0);\r\n}\r\n"],"file":"DecisionPropertiesEditorComponent.js"}